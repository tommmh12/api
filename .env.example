# =============================================================================
# Nexus Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=5000
NODE_ENV=development
# Options: development, staging, production

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=3306
DB_USER=your_database_user
DB_PASSWORD=your_database_password
DB_NAME=nexus_db

# -----------------------------------------------------------------------------
# Database Connection Pool Configuration
# -----------------------------------------------------------------------------
# Minimum connections to maintain in the pool (default: 2)
DB_POOL_MIN=2
# Maximum connections allowed in the pool (default: 10)
DB_POOL_MAX=10
# Time to wait for a connection from the pool in milliseconds (default: 30000 = 30s)
DB_POOL_ACQUIRE_TIMEOUT=30000
# Time before an idle connection is released in milliseconds (default: 10000 = 10s)
DB_POOL_IDLE_TIMEOUT=10000

# -----------------------------------------------------------------------------
# JWT Configuration (SECURITY CRITICAL)
# -----------------------------------------------------------------------------
# JWT_SECRET: REQUIRED - Must be at least 32 characters long
# 
# Generate a cryptographically secure secret using one of these commands:
#
# Using Node.js:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# Using OpenSSL:
#   openssl rand -hex 64
#
# Using PowerShell (Windows):
#   [Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(64))
#
# IMPORTANT: 
# - Never use default or example values in production
# - Never commit your actual secret to version control
# - Rotate secrets periodically and after any suspected compromise
# -----------------------------------------------------------------------------
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_AT_LEAST_32_CHARS
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGIN=http://localhost:5173

# -----------------------------------------------------------------------------
# SMTP Configuration (Email)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_ENABLED=false
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARN, ERROR (default: INFO)
# DEBUG - Verbose logging for development
# INFO - Standard operational logging
# WARN - Warnings and above
# ERROR - Only errors
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Authentication rate limiting (login, password reset)
# Window in milliseconds (default: 15 minutes = 900000ms)
RATE_LIMIT_AUTH_WINDOW_MS=900000
# Maximum attempts per window (default: 5)
RATE_LIMIT_AUTH_MAX_ATTEMPTS=5

# -----------------------------------------------------------------------------
# WebSocket Configuration
# -----------------------------------------------------------------------------
# Heartbeat interval in milliseconds - how often to check for stale connections
# Default: 30000 (30 seconds)
SOCKET_HEARTBEAT_INTERVAL=30000
# Heartbeat timeout in milliseconds - disconnect if no activity within this time
# Default: 60000 (60 seconds)
SOCKET_HEARTBEAT_TIMEOUT=60000

# -----------------------------------------------------------------------------
# Metrics Configuration
# -----------------------------------------------------------------------------
# HTTP slow request threshold in milliseconds (default: 1000 = 1 second)
# Requests exceeding this threshold will be logged as slow
METRICS_HTTP_SLOW_THRESHOLD_MS=1000
# Database slow query threshold in milliseconds (default: 500)
# Queries exceeding this threshold will be logged for optimization
METRICS_DB_SLOW_THRESHOLD_MS=500
# Enable detailed logging of all requests (default: false)
# Set to 'true' for debugging, but disable in production for performance
METRICS_DETAILED_LOGGING=false

# -----------------------------------------------------------------------------
# Resource Threshold Alerting Configuration (Requirements: 5.3)
# -----------------------------------------------------------------------------
# CPU usage thresholds (percentage)
RESOURCE_CPU_WARNING_PERCENT=70
RESOURCE_CPU_CRITICAL_PERCENT=90
# Memory usage thresholds (percentage)
RESOURCE_MEMORY_WARNING_PERCENT=75
RESOURCE_MEMORY_CRITICAL_PERCENT=90
# Disk usage thresholds (percentage)
RESOURCE_DISK_WARNING_PERCENT=80
RESOURCE_DISK_CRITICAL_PERCENT=95
# Path to monitor for disk usage (default: current working directory)
DISK_MONITOR_PATH=

# -----------------------------------------------------------------------------
# Error Rate Alerting Configuration (Requirements: 5.3)
# -----------------------------------------------------------------------------
# Error rate warning threshold (percentage, default: 5%)
ERROR_RATE_WARNING_PERCENT=5
# Error rate critical threshold (percentage, default: 10%)
ERROR_RATE_CRITICAL_PERCENT=10
# Time window for error rate calculation in minutes (default: 15)
ERROR_RATE_WINDOW_MINUTES=15
# Minimum requests required before triggering alerts (default: 10)
ERROR_RATE_MIN_REQUESTS=10

# -----------------------------------------------------------------------------
# Jitsi Configuration (Video Conferencing)
# -----------------------------------------------------------------------------
JITSI_APP_ID=nexus-app
JITSI_DOMAIN=meet.jit.si
# For production, use a proper private key for JWT signing
